(this["webpackJsonpshopify-2021-frontend-dev-challenge"]=this["webpackJsonpshopify-2021-frontend-dev-challenge"]||[]).push([[0],{61:function(e,t,n){},62:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var r,a,c,i,o,s,d,u,j,l,b,h,O=n(0),m=n.n(O),f=n(50),p=n.n(f),x=(n(61),n(62),n(13)),v=n(12),g=n(16),w=n(99),k=n(100),y=n(97),A=n(103),E=n(101),L=n(102),M=n(104),S=n(95),D=n(51),F=n.n(D),N=n(53),P=n.n(N),I=n(1),z=Object(g.a)(E.a)(r||(r=Object(v.a)(["\n  padding: 1rem 1.5rem;\n"]))),C=Object(g.a)(L.a)(a||(a=Object(v.a)(["\n  & .MuiCardHeader-title {\n    font-weight: bold;\n  }\n"]))),T=Object(g.a)(A.a)(c||(c=Object(v.a)(["\n  padding: 1rem;\n"]))),H=Object(g.a)(F.a,{shouldForwardProp:function(){return!1}})(i||(i=Object(v.a)(["\n  color: ","\n"])),(function(e){return e.liked?"#ED4956":""})),R=Object(g.a)(P.a,{shouldForwardProp:function(){return!1}})(o||(o=Object(v.a)(["\n  color: ","\n"])),(function(e){return e.liked?"#ED4956":""})),_=function(e){var t=e.item,n=e.onItemLiked,r=Object(O.useCallback)((function(){n(t.id)}),[t,n]),a="video"===t.media_type?"iframe":"img",c=t.meta.userLiked?H:R;return Object(I.jsxs)(y.a,{children:[Object(I.jsx)(M.a,{component:a,src:t.url}),Object(I.jsxs)(T,{children:[Object(I.jsx)(S.a,{"aria-label":"like the post",onClick:r,children:Object(I.jsx)(c,{fontSize:"large",liked:!!t.meta.userLiked})}),Object(I.jsx)(k.a,{children:"".concat(t.meta.likes," like").concat(1===t.meta.likes?"":"s")})]}),Object(I.jsx)(C,{title:t.title,subheader:"Date: ".concat(t.date)}),Object(I.jsxs)(z,{children:[Object(I.jsx)(k.a,{align:"left",children:t.explanation}),Object(I.jsx)("br",{}),Object(I.jsx)(k.a,{align:"left",color:"text.primary",children:"\xa9 ".concat(t.copyright||"unknown")})]})]})},J=n(24),B=n.p+"static/media/loading.7feeb284.gif",q=Object(J.a)(s||(s=Object(v.a)(["\n  from {\n    width: 0px;\n  }\n  to {\n    width: 3rem;    \n  }\n"]))),G=g.a.div(d||(d=Object(v.a)(["\n  padding: 4rem;\n"]))),K=Object(g.a)(k.a)(u||(u=Object(v.a)(['\n  &:after {\n    content: "\u2026";\n    overflow: hidden;\n    display: inline-block;\n    vertical-align: bottom;\n    animation : '," steps(4, end) 4s infinite;\n  }\n"])),q),Q=g.a.img(j||(j=Object(v.a)(["\n  padding: 20px;\n  height: 50vmin;\n  width: 50vmin;\n"]))),U=function(){return Object(I.jsxs)(G,{children:[Object(I.jsx)(K,{variant:"h4",children:"Loading images"}),Object(I.jsx)(Q,{src:B,alt:"loading spinner"})]})},V=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(k.a,{variant:"h1",children:":("}),Object(I.jsx)(k.a,{padding:"2rem",children:"This is ground control to Major Tom."}),Object(I.jsx)(k.a,{children:"We couldn't get any images from NASA. Please come back later."})]})},W=n(11),X=n(32),Y=n.n(X),Z=n(26),$=n(46),ee=n(96),te=function(){var e=Object($.a)(Y.a.mark((function e(t,n){var r,a,c=arguments;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:3,a=new Request("https://api.nasa.gov/planetary/apod?api_key=".concat("Rd9HQTPJXFeNwcNSjM7fMGU8nIMBjwV8avxxxkEK","&start_date=").concat(t,"&end_date=").concat(n),{}),e.abrupt("return",fetch(a).then((function(e){if(e.ok)return e.json();throw new Error("Error: ".concat(e.status))})).then((function(e){return e.map((function(e){return Object(Z.a)(Object(Z.a)({},e),{},{id:Object(ee.a)(),meta:{likes:0,userLiked:!1}})}))})).catch((function(e){return console.error("Failed to fetch from NASA API. Retries remaining: ".concat(r),e),r>1?te(t,n,r-1):[]})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(e){return e.toISOString().split("T")[0]},re=function(){var e=Object(O.useState)([]),t=Object(x.a)(e,2),n=t[0],r=t[1],a=Object(O.useState)(!1),c=Object(x.a)(a,2),i=c[0],o=c[1],s=Object(O.useRef)(new Date),d=Object(O.useCallback)(Object($.a)(Y.a.mark((function e(){var t,a,c,d,u;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return");case 2:return o(!0),(t=new Date(s.current)).setDate(t.getDate()-16),a=ne(t),c=ne(s.current),e.next=9,te(a,c);case 9:d=e.sent,u=[].concat(Object(W.a)(n),Object(W.a)(d)).sort((function(e,t){return t.date.localeCompare(e.date)})),s.current=t,s.current.setDate(s.current.getDate()-1),r(u),o(!1);case 15:case"end":return e.stop()}}),e)}))),[n,i]);Object(O.useEffect)((function(){d()}),[]),Object(O.useEffect)((function(){var e=function(){window.innerHeight+document.documentElement.scrollTop+10>=document.scrollingElement.scrollHeight&&d()};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[d]);return[n,function(e){var t=n.map((function(t){return t.id!==e?t:Object(Z.a)(Object(Z.a)({},t),{},{meta:Object(Z.a)(Object(Z.a)({},t.meta),{},{likes:t.meta.userLiked?t.meta.likes-1:t.meta.likes+1,userLiked:!t.meta.userLiked})})}));r(t)},i]},ae=g.a.div(l||(l=Object(v.a)(["\n  overflow: hidden;\n  width: 60vw;\n\n  @media screen and (max-width: 600px) {\n    width: 85vw;\n  }\n"]))),ce=g.a.div(b||(b=Object(v.a)(["\n  margin: 10vh 10vw 5vh 10vw;\n"]))),ie=function(){var e=re(),t=Object(x.a)(e,3),n=t[0],r=t[1],a=t[2],c=Object(O.useMemo)((function(){return a||0!==n.length?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(ae,{children:Object(I.jsx)(w.a,{container:!0,spacing:6,children:n.map((function(e){return Object(I.jsx)(w.a,{item:!0,sm:12,children:Object(I.jsx)(_,{item:e,onItemLiked:r})},e.id)}))})}),a&&Object(I.jsx)(U,{})]}):Object(I.jsx)(V,{})}),[n,r,a]);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(ce,{children:[Object(I.jsx)(k.a,{variant:"h3",children:"Spacetagram"}),Object(I.jsx)(k.a,{children:"Powered by NASA's Astronomy Photo of the Day API"})]}),c]})},oe=g.a.div(h||(h=Object(v.a)(["\n  width: ","px;\n  height: ","px;\n  box-shadow: ",";\n"])),(function(e){var t;return null!==(t=e.size)&&void 0!==t?t:1}),(function(e){var t;return null!==(t=e.size)&&void 0!==t?t:1}),(function(e){var t;return Array.from(Array(null!==(t=e.num)&&void 0!==t?t:200),(function(){return function(){var e=Math.floor(100*Math.random()),t=Math.floor(200*Math.random());return"".concat(e,"vw ").concat(t,"vh #FFF")}()})).join(",")})),se=function(){return Object(I.jsxs)("div",{className:"App",children:[Object(I.jsx)(oe,{className:"App-stars",size:1,num:512}),Object(I.jsx)(oe,{className:"App-stars",size:3,num:128}),Object(I.jsx)("div",{className:"App-content",children:Object(I.jsx)(ie,{})})]})};p.a.render(Object(I.jsx)(m.a.StrictMode,{children:Object(I.jsx)(se,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.90b603b8.chunk.js.map