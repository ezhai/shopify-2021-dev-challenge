(this["webpackJsonpshopify-2021-frontend-dev-challenge"]=this["webpackJsonpshopify-2021-frontend-dev-challenge"]||[]).push([[0],{61:function(e,t,n){},62:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a,c,r,i,o,s,l,j,d,u,b,m,O,f,h=n(0),p=n.n(h),v=n(50),x=n.n(v),g=(n(61),n(62),n(13)),w=n(10),k=n(16),y=n(99),S=n(100),A=n(21),M=n(97),E=n(104),N=n(101),L=n(102),D=n(103),I=n(95),F=n(51),C=n.n(F),P=n(53),z=n.n(P),J=n(1),T=Object(k.a)(M.a)(a||(a=Object(w.a)(["\n  overflow: visible;\n"]))),H=Object(k.a)(N.a)(c||(c=Object(w.a)(["\n  padding: 1rem 1.5rem;\n"]))),R=Object(k.a)(L.a)(r||(r=Object(w.a)(["\n  & .MuiCardHeader-title {\n    font-weight: bold;\n  }\n"]))),_=k.a.div(i||(i=Object(w.a)(["\n  padding: 1rem 1.5rem 0 0.5rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),B=Object(A.b)(o||(o=Object(w.a)(["\n  from {\n    transform: scale(1);\n  }\n  25% {\n    transform: scale(4);\n  }\n  to {\n    transform: scale(1);   \n  }\n"]))),q=Object(k.a)(C.a)(s||(s=Object(w.a)(["\n  color: #ED4956;\n  animation: ",";\n"])),(function(e){return e.animate&&Object(A.a)(l||(l=Object(w.a)([""," 0.96s 1"])),B)})),G=function(e){var t=e.item,n=e.onItemLiked,a=Object(h.useState)(!1),c=Object(g.a)(a,2),r=c[0],i=c[1],o=Object(h.useCallback)((function(){n(t.id),i(!0)}),[t,n]),s="video"===t.media_type?"iframe":"img",l=t.meta.userLiked?q:z.a;return Object(J.jsxs)(T,{children:[Object(J.jsx)(D.a,{component:s,onDoubleClick:o,src:t.url}),Object(J.jsxs)(_,{children:[Object(J.jsxs)(E.a,{children:[Object(J.jsx)(I.a,{"aria-label":"like the post",onClick:o,children:Object(J.jsx)(l,{animate:r,fontSize:"large"})}),Object(J.jsx)(S.a,{children:"".concat(t.meta.likes," like").concat(1===t.meta.likes?"":"s")})]}),Object(J.jsx)(S.a,{children:t.date})]}),Object(J.jsx)(R,{title:t.title}),Object(J.jsxs)(H,{children:[Object(J.jsx)(S.a,{align:"left",children:t.explanation}),Object(J.jsx)("br",{}),Object(J.jsx)(S.a,{align:"left",color:"text.primary",children:"\xa9 ".concat(t.copyright||"unknown")})]})]})},K=n.p+"static/media/loading.7feeb284.gif",Q=Object(A.b)(j||(j=Object(w.a)(["\n  from {\n    width: 0px;\n  }\n  to {\n    width: 3rem;    \n  }\n"]))),U=k.a.div(d||(d=Object(w.a)(["\n  padding: 4rem;\n"]))),V=Object(k.a)(S.a)(u||(u=Object(w.a)(['\n  &:after {\n    content: "\u2026";\n    overflow: hidden;\n    display: inline-block;\n    vertical-align: bottom;\n    animation : '," steps(4, end) 3s infinite;\n  }\n"])),Q),W=k.a.img(b||(b=Object(w.a)(["\n  padding: 20px;\n  height: 20vmin;\n  width: 20vmin;\n"]))),X=function(){return Object(J.jsxs)(U,{children:[Object(J.jsx)(W,{src:K,alt:"loading spinner"}),Object(J.jsx)(V,{variant:"h4",children:"loading images"})]})},Y=function(){return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(S.a,{variant:"h1",children:":("}),Object(J.jsx)(S.a,{padding:"2rem",children:"This is ground control to Major Tom."}),Object(J.jsx)(S.a,{children:"We couldn't get any images from NASA. Please come back later."})]})},Z=n(12),$=n(32),ee=n.n($),te=n(24),ne=n(46),ae=n(96),ce=function(){var e={};try{var t,n;e=null!==(t=JSON.parse(null!==(n=localStorage.getItem("spacetagram"))&&void 0!==n?n:"{}"))&&void 0!==t?t:{}}catch(a){}return e},re=function(){var e=Object(ne.a)(ee.a.mark((function e(t,n){var a,c,r,i=arguments;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:3,c=new Request("https://api.nasa.gov/planetary/apod?api_key=".concat("Rd9HQTPJXFeNwcNSjM7fMGU8nIMBjwV8avxxxkEK","&start_date=").concat(t,"&end_date=").concat(n),{}),r=ce(),e.abrupt("return",fetch(c).then((function(e){if(e.ok)return e.json();throw new Error("Error: ".concat(e.status))})).then((function(e){return e.map((function(e){var t,n,a,c,i;return Object(te.a)(Object(te.a)({},e),{},{id:Object(ae.a)(),meta:Object(te.a)(Object(te.a)({},null!==(t=r[e.date])&&void 0!==t?t:{}),{},{likes:null!==(n=null===(a=r[e.date])||void 0===a?void 0:a.likes)&&void 0!==n?n:Math.floor(10*Math.random()),userLiked:null!==(c=null===(i=r[e.date])||void 0===i?void 0:i.userLiked)&&void 0!==c&&c})})}))})).catch((function(e){return console.error("Failed to fetch from NASA API. Retries remaining: ".concat(a),e),a>1?re(t,n,a-1):[]})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie=function(e){return e.toISOString().split("T")[0]},oe=function(){var e=Object(h.useState)([]),t=Object(g.a)(e,2),n=t[0],a=t[1],c=Object(h.useState)(!1),r=Object(g.a)(c,2),i=r[0],o=r[1],s=Object(h.useRef)(new Date),l=Object(h.useCallback)(Object(ne.a)(ee.a.mark((function e(){var t,c,r,l,j;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return");case 2:return o(!0),(t=new Date(s.current)).setDate(t.getDate()-16),c=ie(t),r=ie(s.current),e.next=9,re(c,r);case 9:l=e.sent,j=[].concat(Object(Z.a)(n),Object(Z.a)(l)).sort((function(e,t){return t.date.localeCompare(e.date)})),s.current=t,s.current.setDate(s.current.getDate()-1),a(j),o(!1);case 15:case"end":return e.stop()}}),e)}))),[n,i]);Object(h.useEffect)((function(){l()}),[]),Object(h.useEffect)((function(){var e=function(){window.innerHeight+document.documentElement.scrollTop+10>=document.scrollingElement.scrollHeight&&l()};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[l]);return[n,function(e){var t=n.map((function(t){return t.id!==e?t:Object(te.a)(Object(te.a)({},t),{},{meta:Object(te.a)(Object(te.a)({},t.meta),{},{likes:t.meta.userLiked?t.meta.likes-1:t.meta.likes+1,userLiked:!t.meta.userLiked})})})),c=ce();t.forEach((function(e){c[e.date]=e.meta}));try{localStorage.setItem("spacetagram",JSON.stringify(c))}catch(r){console.error(r)}a(t)},i]},se=k.a.div(m||(m=Object(w.a)(["\n  width: 60vw;\n\n  @media screen and (max-width: 600px) {\n    width: 85vw;\n  }\n"]))),le=k.a.div(O||(O=Object(w.a)(["\n  margin: 10vh 10vw 5vh 10vw;\n"]))),je=function(){var e=oe(),t=Object(g.a)(e,3),n=t[0],a=t[1],c=t[2],r=Object(h.useMemo)((function(){return c||0!==n.length?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(se,{children:Object(J.jsx)(y.a,{container:!0,spacing:6,children:n.map((function(e){return Object(J.jsx)(y.a,{item:!0,sm:12,children:Object(J.jsx)(G,{item:e,onItemLiked:a})},e.id)}))})}),c&&Object(J.jsx)(X,{})]}):Object(J.jsx)(Y,{})}),[n,a,c]);return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(le,{children:[Object(J.jsx)(S.a,{variant:"h3",children:"Spacetagram"}),Object(J.jsx)(S.a,{children:"Powered by NASA's Astronomy Photo of the Day API"})]}),r]})},de=k.a.div(f||(f=Object(w.a)(["\n  width: ","px;\n  height: ","px;\n  box-shadow: ",";\n"])),(function(e){var t;return null!==(t=e.size)&&void 0!==t?t:1}),(function(e){var t;return null!==(t=e.size)&&void 0!==t?t:1}),(function(e){var t;return Array.from(Array(null!==(t=e.num)&&void 0!==t?t:200),(function(){return function(){var e=Math.floor(100*Math.random()),t=Math.floor(200*Math.random());return"".concat(e,"vw ").concat(t,"vh #FFF")}()})).join(",")})),ue=function(){return Object(J.jsxs)("div",{className:"App",children:[Object(J.jsx)(de,{className:"App-stars",size:1,num:512}),Object(J.jsx)(de,{className:"App-stars",size:3,num:128}),Object(J.jsx)("div",{className:"App-content",children:Object(J.jsx)(je,{})})]})};x.a.render(Object(J.jsx)(p.a.StrictMode,{children:Object(J.jsx)(ue,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.26d5fac4.chunk.js.map